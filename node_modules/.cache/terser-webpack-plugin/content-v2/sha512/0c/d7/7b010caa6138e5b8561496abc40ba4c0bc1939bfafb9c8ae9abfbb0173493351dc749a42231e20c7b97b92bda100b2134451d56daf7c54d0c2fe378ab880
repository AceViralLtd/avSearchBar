{"code":"!function(e,t){for(var n in t)e[n]=t[n]}(window,function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=0)}([function(e,t,n){\"use strict\";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(n(1));!function(e){e.fn.avSearchBar=function(t){var n=this;this.each(function(){var r=e(this);r.selector=n.selector,new o.default(r,t)})}}(jQuery)},function(e,t,n){\"use strict\";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,\"__esModule\",{value:!0});var o=n(2),i=function(){function e(e,t){this.keyTimeout=null,this.$element=e,this.config=r({},o.defaultConfig,t,{instantSearch:r({},o.defaultConfig.instantSearch,t.instantSearch),request:r({},o.defaultConfig.request,t.request),selector:r({},o.defaultConfig.selector,t.selector)}),console.log(this.config),this.tryFindErrors(),this.setupBinds(),this.resetSearchBar()}return e.prototype.tryFindErrors=function(){this.config.instantSearch.enabled&&!this.config.request.url&&console.error(\"avSearchBar: Instnt serach enabled without api url\")},e.prototype.processSearchResults=function(e){var t=this,n=$(\".no-results\",this.$element);n.show();var r=this.config.resutExtractor(e);$.each(r,function(e,r){n.hide(),t.addSearchResult(t.config.resultMapper(r))})},e.prototype.addSearchResult=function(e){var t=$(this.config.selector.template,this.$element).html();console.log(e),$.each(e,function(e,n){t=t.toString().replace(\"$\"+e,n)}),$(this.config.selector.resultsContainer).append(t)},e.prototype.resetSearchResult=function(){$(\".no-results\",this.$element).hide(),$(this.config.selector.result+\" .loading\",this.$element).show(),$(this.config.selector.resultsContainer,this.$element).html(\"\")},e.prototype.resetSearchBar=function(){$(this.config.selector.input,this.$element).val(this.config.placeholderText)},e.prototype.setupBinds=function(){var e=this,t=$(this.config.selector.button,this.$element),n=$(this.config.selector.box,this.$element),r=$(this.config.selector.input,this.$element);t.on(\"click\",function(){n.toggle(),r.is(\":visible\")&&r.focus()}),r.on({focus:function(){r.val()===e.config.placeholderText&&r.val(\"\")},blur:function(){\"\"===e.config.placeholderText&&r.val(e.config.placeholderText)},keyup:function(t){e.config.instantSearch.enabled&&(null!==e.keyTimeout&&(clearTimeout(e.keyTimeout),e.keyTimeout=null),13!==t.keyCode&&(e.keyTimeout=setTimeout(function(t){e.runInstantSearch(r.val())},e.config.instantSearch.keyTimeout)))}}),this.$element.on({keyup:function(t){~~[38,40].indexOf(t.keyCode)&&(t.preventDefault(),t.stopPropagation());var n=$(e.config.selector.result,e.$element);if(n.length){var r=-1;n.each(function(e){$(this).is(\":focus\")&&(r=e)}),++r>=n.length&&(r=0),$(n[r]).focus()}}})},e.prototype.runInstantSearch=function(e){var t=this,n=$(this.config.selector.result,this.$element);if(e.length<=this.config.instantSearch.minSearchLen)n.hide();else{var o=r({},this.config.request.bodyTemplate);$.each(o,function(t,n){\"avSearchBoxTermHere\"===n.toString()&&(o[t]=e)});var i,s=\"?\";if(\"GET\"===this.config.request.method.toUpperCase())s+=$.param(o);else for(var c in i=new FormData,o)i.append(c,o[c]);n.show(),this.resetSearchResult(),fetch(this.config.request.url+s,{method:this.config.request.method,body:i}).then(function(e){return e.json()}).then(function(e){$(\".loading\",n).hide(),t.processSearchResults(e)})}},e}();t.default=i},function(e,t,n){\"use strict\";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,\"__esModule\",{value:!0}),t.defaultConfig={placeholderText:\"Search\",selector:{button:\".search-button\",box:\".search-box\",input:\".search-input\",resultsContainer:\".results\",result:\".search-results\",template:\".result-template\"},request:{url:\"\",method:\"post\",bodyTemplate:{search:\"avSearchBoxTermHere\"}},instantSearch:{enabled:!1,minSearchLen:2,keyTimeout:500},resultMapper:function(e){return r({},e)},resutExtractor:function(e){return e.searchResults?e.searchResults.slice():[]}}}]));","extractedComments":[]}